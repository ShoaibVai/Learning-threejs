{
  "id": "backup-restore",
  "title": "Backup Strategies & Disaster Recovery",
  "slug": "backup-restore",
  "overview": "Implement robust backup strategies, test restore procedures, and prepare for disaster recovery scenarios.",
  "objectives": ["Design backup strategy (3-2-1 rule)", "Automate database and file backups", "Test restore procedures", "Create disaster recovery plan"],
  "prerequisites": ["Server access", "Database knowledge (optional)"],
  "durationMinutes": 70,
  "order": 3,
  "sections": [{"type": "reading", "title": "Backup Best Practices", "content": "# The 3-2-1 Rule\n\n- **3** copies of your data\n- **2** different storage types\n- **1** offsite backup\n\n## What to Backup\n\n1. **Databases**: Full dumps + incremental\n2. **Application code**: Git repos (offsite already)\n3. **User-uploaded files**: /var/www/uploads, etc.\n4. **Configuration files**: /etc/nginx/, app configs\n5. **SSL certificates**: /etc/letsencrypt/\n\n## Backup Tools\n\n- **rsync**: File sync\n- **mysqldump/pg_dump**: Database backups\n- **tar**: Archive creation\n- **restic/borg**: Encrypted incremental backups\n- **Cloud storage**: S3, Backblaze, rsync.net\n\n## CRITICAL: Test Restores!\n\nUntested backups are not backups!"}],
  "resources": [{"title": "Backup Strategy Guide", "url": "https://www.backblaze.com/blog/the-3-2-1-backup-strategy/", "type": "article"}, {"title": "rsync Tutorial", "url": "https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories", "type": "article"}],
  "miniProject": {"title": "Automated Backup System", "description": "Create automated backup scripts for files and databases with restore testing", "estimatedTime": 75, "steps": ["Create backup script for files (tar + gzip)", "Create database backup script", "Set up backup rotation (keep last 7 days)", "Schedule daily backups with cron", "Sync backups to remote location (rsync or cloud)", "Document restore procedure", "Perform restore drill"], "deliverables": ["Working backup scripts", "Automated scheduling", "Tested restore procedure", "Documentation"], "rubric": ["Backup script works (3 pts)", "Automation configured (2 pts)", "Offsite backup (2 pts)", "Restore tested (3 pts)"], "starterPath": "/practice/server-starters/backup-scripts"},
  "quiz": {"passingScore": 70, "questions": [{"id": "q1", "type": "single", "question": "What is the 3-2-1 backup rule?", "options": ["3 copies, 2 media types, 1 offsite", "3 servers, 2 databases, 1 admin", "3 backups, 2 hours, 1 location", "3 days, 2 weeks, 1 month"], "correctAnswer": "3 copies, 2 media types, 1 offsite", "explanation": "3-2-1 rule: 3 copies of data, on 2 different media, with 1 offsite backup.", "points": 15}, {"id": "q2", "type": "multiple", "question": "What should you backup?", "options": ["Databases", "User files", "Configuration files", "node_modules"], "correctAnswer": ["Databases", "User files", "Configuration files"], "explanation": "Backup data and configs. Dependencies (node_modules) can be reinstalled.", "points": 20}, {"id": "q3", "type": "single", "question": "How often should you test restores?", "options": ["Never", "Only after disasters", "Regularly (monthly/quarterly)", "Only for important data"], "correctAnswer": "Regularly (monthly/quarterly)", "explanation": "Regular restore tests ensure backups actually work when you need them.", "points": 15}, {"id": "q4", "type": "single", "question": "Which tool is used for database backups?", "options": ["rsync", "mysqldump", "tar", "cp"], "correctAnswer": "mysqldump", "explanation": "mysqldump creates SQL dumps of MySQL databases. Use pg_dump for PostgreSQL.", "points": 10}, {"id": "q5", "type": "short-answer", "question": "Why is having an offsite backup important?", "correctAnswer": "Protects against local disasters like fire, flood, theft, or hardware failure affecting all local copies", "explanation": "Offsite backups protect against catastrophic local failures. Cloud storage or remote servers are common solutions.", "points": 40}]},
  "environment": {"setupSteps": ["Install backup tools: sudo apt install rsync", "Create backup directory: sudo mkdir -p /backups", "Ensure sufficient disk space"], "commands": ["tar -czf backup.tar.gz /path/to/data", "mysqldump -u user -p database > backup.sql", "rsync -avz /local/ user@remote:/backups/", "crontab -e  # Schedule backups"], "troubleshooting": [{"issue": "Backup filling up disk", "solution": "Implement backup rotation. Delete old backups: find /backups -mtime +7 -delete"}, {"issue": "rsync permission denied", "solution": "Check SSH keys are set up, target directory is writable, user has permissions"}]}
}
