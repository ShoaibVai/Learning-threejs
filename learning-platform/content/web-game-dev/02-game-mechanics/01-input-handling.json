{
  "id": "input-handling",
  "title": "Input Handling: Keyboard, Mouse & Touch",
  "slug": "input-handling",
  "overview": "Implement responsive input handling for keyboard, mouse, and touch events to create interactive gameplay.",
  "objectives": ["Handle keyboard events for player control", "Implement mouse tracking and clicking", "Support touch events for mobile", "Create input abstraction layer"],
  "prerequisites": ["Game loop pattern", "JavaScript event handling"],
  "durationMinutes": 55,
  "order": 1,
  "sections": [{"type": "reading", "title": "Input Systems", "content": "# Input Handling\n\n## Keyboard\n\n```javascript\nclass InputHandler {\n    constructor() {\n        this.keys = {};\n        \n        window.addEventListener('keydown', (e) => {\n            this.keys[e.code] = true;\n        });\n        \n        window.addEventListener('keyup', (e) => {\n            this.keys[e.code] = false;\n        });\n    }\n    \n    isPressed(key) {\n        return !!this.keys[key];\n    }\n}\n\n// Usage\nif (input.isPressed('ArrowLeft')) {\n    player.x -= speed * deltaTime;\n}\n```\n\n## Mouse\n\n```javascript\ncanvas.addEventListener('mousemove', (e) => {\n    const rect = canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    // Use x, y\n});\n\ncanvas.addEventListener('click', (e) => {\n    // Handle click\n});\n```\n\n## Touch (Mobile)\n\n```javascript\ncanvas.addEventListener('touchstart', (e) => {\n    e.preventDefault();\n    const touch = e.touches[0];\n    const rect = canvas.getBoundingClientRect();\n    const x = touch.clientX - rect.left;\n    const y = touch.clientY - rect.top;\n});\n```"}],
  "resources": [{"title": "MDN Keyboard Events", "url": "https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent", "type": "documentation"}, {"title": "Touch Events Guide", "url": "https://developer.mozilla.org/en-US/docs/Web/API/Touch_events", "type": "documentation"}],
  "miniProject": {"title": "Multi-Input Game Control", "description": "Create a player character controlled by keyboard, mouse, and touch", "estimatedTime": 55, "steps": ["Create InputHandler class", "Implement keyboard WASD/Arrow movement", "Add mouse click to teleport", "Support touch drag for movement", "Show input debug overlay", "Test on mobile device"], "deliverables": ["Multi-input support", "Smooth controls", "Mobile compatibility"], "rubric": ["Keyboard working (3 pts)", "Mouse working (2 pts)", "Touch working (3 pts)", "Clean code (2 pts)"], "starterPath": "/practice/game-starters/canvas-vite-ts"},
  "quiz": {"passingScore": 70, "questions": [{"id": "q1", "type": "single", "question": "Best way to track key states?", "options": ["Check in event handler", "Store in object/Map", "Global variables", "LocalStorage"], "correctAnswer": "Store in object/Map", "explanation": "Storing key states in an object allows checking multiple keys per frame.", "points": 15}, {"id": "q2", "type": "single", "question": "Why use 'keydown' instead of 'keypress'?", "options": ["keypress is deprecated", "keydown fires faster", "keydown works for all keys", "Both A and C"], "correctAnswer": "Both A and C", "explanation": "keypress is deprecated and doesn't work for modifier keys. Use keydown/keyup.", "points": 15}, {"id": "q3", "type": "single", "question": "Get canvas-relative mouse position?", "options": ["e.clientX, e.clientY", "e.clientX - rect.left, e.clientY - rect.top", "e.offsetX, e.offsetY", "Both B and C"], "correctAnswer": "Both B and C", "explanation": "offsetX/offsetY or clientX/Y minus canvas position give canvas coordinates.", "points": 10}, {"id": "q4", "type": "multiple", "question": "Touch event handling?", "options": ["preventDefault() to stop scroll", "Access touches array", "Support multi-touch", "Works same as mouse"], "correctAnswer": ["preventDefault() to stop scroll", "Access touches array", "Support multi-touch"], "explanation": "Touch events differ from mouse: multiple touches, need preventDefault.", "points": 20}, {"id": "q5", "type": "short-answer", "question": "Why create an input abstraction layer?", "correctAnswer": "To unify different input methods (keyboard, mouse, touch, gamepad) behind a single interface, making code cleaner and supporting multiple platforms easily", "explanation": "Abstraction separates input handling from game logic.", "points": 40}]},
  "environment": {"setupSteps": ["Use previous canvas setup", "Test on desktop browser", "Use browser mobile emulation for touch testing", "Optional: test on actual mobile device"], "commands": ["# Mobile device testing\nadb devices  # Android\n# Or use ngrok to expose local server"], "troubleshooting": [{"issue": "Keys stay pressed after tab switch", "solution": "Listen for 'blur' event and clear all key states."}, {"issue": "Touch causes page scroll", "solution": "Call e.preventDefault() in touch event handlers and add touch-action: none CSS."}]}
}
