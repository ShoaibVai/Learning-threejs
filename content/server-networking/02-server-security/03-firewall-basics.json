{
  "id": "firewall-basics",
  "title": "Firewall Configuration with UFW",
  "slug": "firewall-basics",
  "overview": "Learn to configure firewalls to control network traffic, allowing only necessary connections while blocking potential attacks.",
  "objectives": [
    "Understand firewall fundamentals and iptables",
    "Configure UFW (Uncomplicated Firewall) on Linux",
    "Set up Windows Firewall rules",
    "Implement defense-in-depth strategies"
  ],
  "prerequisites": ["Basic understanding of ports and protocols", "Command line access to your server"],
  "durationMinutes": 50,
  "order": 3,
  "sections": [
    {
      "type": "reading",
      "title": "Firewall Fundamentals",
      "content": "# What is a Firewall?\n\nA firewall controls incoming and outgoing network traffic based on security rules.\n\n## Default Deny Principle\n\n- Block all traffic by default\n- Explicitly allow only what's needed\n\n## Common Policies\n\n**Web Server:**\n- Allow: 22 (SSH), 80 (HTTP), 443 (HTTPS)\n- Deny: Everything else\n\n**Game Server:**\n- Allow: SSH, game port (e.g., 25565 for Minecraft)\n- Deny: Everything else\n\n## UFW (Ubuntu/Debian)\n\nUser-friendly wrapper for iptables:\n\n```bash\nsudo ufw allow 22/tcp  # SSH\nsudo ufw allow 80/tcp  # HTTP\nsudo ufw allow 443/tcp # HTTPS\nsudo ufw enable\n```"
    }
  ],
  "resources": [
    {"title": "UFW Documentation", "url": "https://help.ubuntu.com/community/UFW", "type": "documentation"},
    {"title": "iptables Tutorial", "url": "https://www.frozentux.net/iptables-tutorial/iptables-tutorial.html", "type": "article"},
    {"title": "Windows Firewall Guide", "url": "https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-firewall/", "type": "documentation"}
  ],
  "miniProject": {
    "title": "Secure Server with Firewall Rules",
    "description": "Configure a firewall to allow only necessary traffic",
    "estimatedTime": 40,
    "steps": [
      "Install UFW (Linux) or configure Windows Firewall",
      "Set default deny policy",
      "Allow SSH (port 22)",
      "Allow HTTP/HTTPS (80, 443)",
      "Test rules with nmap or online port scanner",
      "Document your firewall configuration"
    ],
    "deliverables": ["Working firewall configuration", "Only necessary ports open", "Documentation of rules"],
    "rubric": ["Default deny policy set (2 pts)", "Correct ports allowed (4 pts)", "Unnecessary ports blocked (2 pts)", "Documentation (2 pts)"],
    "starterPath": "/practice/server-starters/firewall-config"
  },
  "quiz": {
    "passingScore": 70,
    "questions": [
      {"id": "q1", "type": "single", "question": "What is the default deny principle?", "options": ["Block all traffic except what's explicitly allowed", "Allow all traffic", "Only block malicious traffic", "Deny SSH access"], "correctAnswer": "Block all traffic except what's explicitly allowed", "explanation": "Default deny is a security best practice: block everything by default, then allow specific services.", "points": 15},
      {"id": "q2", "type": "multiple", "question": "Which ports should a basic web server allow?", "options": ["22 (SSH)", "80 (HTTP)", "443 (HTTPS)", "3389 (RDP)"], "correctAnswer": ["22 (SSH)", "80 (HTTP)", "443 (HTTPS)"], "explanation": "Web servers need SSH for management, HTTP and HTTPS for web traffic. RDP is for Windows remote desktop.", "points": 20},
      {"id": "q3", "type": "single", "question": "What is UFW?", "options": ["A VPN protocol", "A user-friendly firewall wrapper", "A web server", "A monitoring tool"], "correctAnswer": "A user-friendly firewall wrapper", "explanation": "UFW (Uncomplicated Firewall) is a simplified interface for managing iptables.", "points": 10},
      {"id": "q4", "type": "single", "question": "Command to allow SSH through UFW?", "options": ["ufw open ssh", "ufw allow 22/tcp", "ufw enable ssh", "ufw permit 22"], "correctAnswer": "ufw allow 22/tcp", "explanation": "ufw allow 22/tcp allows TCP traffic on port 22 (SSH).", "points": 15},
      {"id": "q5", "type": "short-answer", "question": "Why is default deny more secure than default allow?", "correctAnswer": "Default deny ensures only explicitly needed services are accessible, minimizing attack surface and preventing accidental exposure", "explanation": "This principle is fundamental to security: start with nothing allowed, then carefully add only what's necessary.", "points": 40}
    ]
  },
  "environment": {
    "setupSteps": ["Install UFW: sudo apt install ufw", "Check status: sudo ufw status", "Enable UFW: sudo ufw enable"],
    "commands": ["sudo ufw status", "sudo ufw allow 80/tcp", "sudo ufw deny 23", "sudo ufw delete allow 80/tcp", "sudo ufw reset"],
    "troubleshooting": [
      {"issue": "Locked out after enabling UFW", "solution": "Always allow SSH before enabling: sudo ufw allow 22/tcp. If locked out, access via console/recovery."},
      {"issue": "Rules not working", "solution": "Ensure UFW is enabled: sudo ufw status. Check rule order: rules are processed top to bottom."}
    ]
  }
}
