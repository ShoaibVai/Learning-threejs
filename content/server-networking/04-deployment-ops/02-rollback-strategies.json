{
  "id": "rollback-strategies",
  "title": "Rollback Strategies & Version Management",
  "slug": "rollback-strategies",
  "overview": "Plan for failures with effective rollback strategies, version tagging, and database migration management.",
  "objectives": ["Implement rollback procedures", "Version deployments properly", "Handle database rollbacks", "Create deployment checklists"],
  "prerequisites": ["Deployment basics", "Git knowledge"],
  "durationMinutes": 55,
  "order": 2,
  "sections": [{"type": "reading", "title": "Rollback Planning", "content": "# Why Rollbacks?\n\nDeployments fail. Be prepared.\n\n## Rollback Methods\n\n1. **Git revert**: Revert code changes\n2. **Previous build**: Keep last N versions\n3. **Blue-green switch**: Instant switch back\n4. **Database snapshots**: Pre-deployment DB backup\n\n## Version Tagging\n```bash\ngit tag -a v1.2.3 -m \"Release 1.2.3\"\ngit push origin v1.2.3\n```\n\n## Database Migrations\n\n- Always reversible\n- Test rollback in staging\n- Never delete data immediately (soft delete)\n\n## Deployment Checklist\n\n- [ ] Tests pass\n- [ ] Database backup\n- [ ] Tag version\n- [ ] Deploy to staging first\n- [ ] Monitor for errors\n- [ ] Rollback plan ready"}],
  "resources": [{"title": "Semantic Versioning", "url": "https://semver.org/", "type": "article"}, {"title": "Database Migrations Best Practices", "url": "https://www.brunton-spall.co.uk/post/2014/05/06/database-migrations-done-right/", "type": "article"}],
  "miniProject": {"title": "Complete Rollback System", "description": "Implement versioned deployments with automated rollback", "estimatedTime": 60, "steps": ["Tag current version", "Create rollback script", "Test rollback process", "Implement database backup before deploy", "Create deployment checklist", "Simulate failed deployment and rollback"], "deliverables": ["Working rollback script", "Version tagging system", "Documented procedures"], "rubric": ["Rollback works (4 pts)", "Versioning implemented (2 pts)", "DB backups automated (2 pts)", "Documentation (2 pts)"], "starterPath": "/practice/server-starters/rollback-system"},
  "quiz": {"passingScore": 70, "questions": [{"id": "q1", "type": "single", "question": "What is semantic versioning format?", "options": ["MAJOR.MINOR.PATCH", "YEAR.MONTH.DAY", "V1.V2.V3", "A.B.C.D"], "correctAnswer": "MAJOR.MINOR.PATCH", "explanation": "SemVer uses MAJOR.MINOR.PATCH (e.g., 2.1.4) for versioning.", "points": 10}, {"id": "q2", "type": "multiple", "question": "Before deployment?", "options": ["Run tests", "Backup database", "Tag version", "Delete logs"], "correctAnswer": ["Run tests", "Backup database", "Tag version"], "explanation": "Pre-deployment: test, backup, version tag. Don't delete logs.", "points": 20}, {"id": "q3", "type": "single", "question": "Best rollback method?", "options": ["Delete everything and reinstall", "Keep previous version ready to switch", "Hope nothing breaks", "Restore from last month"], "correctAnswer": "Keep previous version ready to switch", "explanation": "Keeping previous version allows instant rollback without rebuilding.", "points": 15}, {"id": "q4", "type": "single", "question": "Database migration best practice?", "options": ["Always reversible", "Delete data immediately", "Never test rollback", "Skip backups"], "correctAnswer": "Always reversible", "explanation": "Migrations should always be reversible to enable safe rollbacks.", "points": 15}, {"id": "q5", "type": "short-answer", "question": "Why tag versions before deploying?", "correctAnswer": "To identify exact code version in production, enable easy rollback to known good state, and track what changes were deployed when", "explanation": "Version tags create checkpoints for deployments and rollbacks.", "points": 40}]},
  "environment": {"setupSteps": ["Ensure Git repository", "Create deployment directories", "Set up backup system"], "commands": ["git tag v1.0.0", "git checkout v1.0.0", "git describe --tags", "npm version patch"], "troubleshooting": [{"issue": "Can't rollback database", "solution": "Always backup before migrations. Test rollback in staging. Consider soft deletes."}, {"issue": "Old version has dependencies missing", "solution": "Keep node_modules or have reproducible builds. Document dependencies per version."}]}
}
