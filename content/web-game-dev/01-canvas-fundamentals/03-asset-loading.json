{
  "id": "asset-loading",
  "title": "Asset Pipeline: Sprites & Audio",
  "slug": "asset-loading",
  "overview": "Load and manage game assets including images, sprite sheets, and audio files. Implement loading screens and asset management.",
  "objectives": ["Load images and create sprites", "Use sprite sheets efficiently", "Load and play audio", "Implement loading screen with progress"],
  "prerequisites": ["Canvas basics", "Game loop", "Promises/async-await"],
  "durationMinutes": 60,
  "order": 3,
  "sections": [{"type": "reading", "title": "Asset Management", "content": "# Loading Assets\n\n## Images\n\n```javascript\nclass AssetLoader {\n    async loadImage(src) {\n        return new Promise((resolve, reject) => {\n            const img = new Image();\n            img.onload = () => resolve(img);\n            img.onerror = reject;\n            img.src = src;\n        });\n    }\n    \n    async loadAll(assets) {\n        const promises = assets.map(src => this.loadImage(src));\n        return await Promise.all(promises);\n    }\n}\n```\n\n## Sprite Sheets\n\nCombine multiple sprites into one image:\n- Fewer HTTP requests\n- Better performance\n- Easier to manage\n\n```javascript\nclass Sprite {\n    constructor(sheet, x, y, width, height) {\n        this.sheet = sheet;\n        this.x = x; this.y = y;\n        this.width = width; this.height = height;\n    }\n    \n    draw(ctx, dx, dy) {\n        ctx.drawImage(\n            this.sheet,\n            this.x, this.y, this.width, this.height,\n            dx, dy, this.width, this.height\n        );\n    }\n}\n```\n\n## Audio\n\n```javascript\nconst bgMusic = new Audio('music.mp3');\nbgMusic.loop = true;\nbgMusic.volume = 0.5;\nbgMusic.play();\n```"}],
  "resources": [{"title": "Web Audio API", "url": "https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API", "type": "documentation"}, {"title": "Free Game Assets", "url": "https://opengameart.org/", "type": "tool"}, {"title": "Sprite Sheet Tools", "url": "https://www.codeandweb.com/texturepacker", "type": "tool"}],
  "miniProject": {"title": "Sprite Animation System", "description": "Create animated sprites with a sprite sheet and asset loader", "estimatedTime": 60, "steps": ["Create AssetLoader class", "Load sprite sheet", "Define sprite frames", "Create animation class (frame sequencing)", "Implement loading screen with progress bar", "Add background music with play/pause", "Display animated sprite on canvas"], "deliverables": ["Working asset loader", "Animated sprite", "Loading screen", "Audio controls"], "rubric": ["Asset loading works (3 pts)", "Sprite animation smooth (3 pts)", "Loading screen (2 pts)", "Audio controls (2 pts)"], "starterPath": "/practice/game-starters/canvas-vite-ts"},
  "quiz": {"passingScore": 70, "questions": [{"id": "q1", "type": "single", "question": "Why use sprite sheets?", "options": ["Easier to draw", "Fewer HTTP requests", "Larger file size", "Better quality"], "correctAnswer": "Fewer HTTP requests", "explanation": "Sprite sheets combine multiple images, reducing network requests and improving load time.", "points": 15}, {"id": "q2", "type": "single", "question": "Which drawImage() signature draws part of an image?", "options": ["drawImage(img, dx, dy)", "drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh)", "drawImage(img, x, y, w, h)", "Both B and C"], "correctAnswer": "drawImage(img, sx, sy, sw, sh, dx, dy, dw, dh)", "explanation": "The 9-parameter version draws a sub-rectangle from source to destination.", "points": 15}, {"id": "q3", "type": "multiple", "question": "Asset loading best practices?", "options": ["Show loading screen", "Load all before game starts", "Handle load errors", "Load during gameplay"], "correctAnswer": ["Show loading screen", "Load all before game starts", "Handle load errors"], "explanation": "Load critical assets upfront with progress feedback and error handling.", "points": 20}, {"id": "q4", "type": "single", "question": "How to loop background music?", "options": ["audio.loop = true", "audio.repeat()", "audio.infinite = true", "Manually replay on end"], "correctAnswer": "audio.loop = true", "explanation": "Setting loop property to true makes audio repeat automatically.", "points": 10}, {"id": "q5", "type": "short-answer", "question": "Explain Promise.all() in asset loading context", "correctAnswer": "Promise.all() loads multiple assets in parallel and resolves when all are loaded, or rejects if any fails, enabling efficient batch loading", "explanation": "Promise.all() is perfect for loading multiple assets concurrently.", "points": 40}]},
  "environment": {"setupSteps": ["Set up Vite project for ES modules", "Create assets directory", "Find or create test sprites/audio"], "commands": ["npm create vite@latest my-game --template vanilla-ts", "cd my-game && npm install", "npm run dev"], "troubleshooting": [{"issue": "CORS error loading images", "solution": "Use local dev server (Vite, Live Server) instead of file://. Or use online CDN assets."}, {"issue": "Audio won't play", "solution": "Browsers block autoplay. Require user interaction (button click) before playing audio."}]}
}
